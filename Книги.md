# Все книги в базе

```dataviewjs
const formatDate = date => {
    return new Date(date.ts).toLocaleDateString('ru-RU', {
        day: 'numeric',
        month: 'long',
        year: 'numeric'
	});
}

let book_pages = dv.pages("").where(page => {
    if (page["Тип"] && page["Тип"].path == "types/Книга.md" && page.file.folder != "templates") return page;
}).sort(p => p["Закончил читать"], "desc");

const MAX_BOOK_NAME_LENGTH = 40;

dv.table(
    ["Название", "Автор", "Прочитана"],
    book_pages.map(p => {
        const shortName = p.Название.length > MAX_BOOK_NAME_LENGTH  
            ? p.Название.substring(0, MAX_BOOK_NAME_LENGTH) + "..." 
            : p.Название;
		const authors = p.Автор.split(",").map(el=>el.trim()).join("<br />");
        return [
            dv.fileLink(p.file.path, false, shortName),
            authors,
            p["Закончил читать"] !== null ? formatDate(p["Закончил читать"]) :
            ""
        ];
    })
);
```


