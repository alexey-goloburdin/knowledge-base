# Прочитанное в 2025

```dataviewjs
let booksCount = 0;

let bookPages = dv.pages("").where(page => {
	if (page["Закончил читать"]) console.log(new Date(page["Закончил читать"].ts).getYear());
    if (page["Тип"] && page["Тип"].path == "types/Книга.md" && page.file.folder != "templates" && page["Закончил читать"] && new Date(page["Закончил читать"].ts).getFullYear() === 2025) {
	  booksCount++;
      return page;
    }
}).sort(p => p["Закончил читать"], "desc");

const MAX_BOOK_NAME_LENGTH = 50;
let index = booksCount + 1;

dv.table(
    ["", "Название", "Автор", "Страниц", "Прочитана"],
    bookPages.map(p => {
        const shortName = p.Название.length > MAX_BOOK_NAME_LENGTH  
            ? p.Название.substring(0, MAX_BOOK_NAME_LENGTH) + "..." 
            : p.Название;
		const authors = p.Автор.split(",").map(el => el.trim()).join("<br />");
        return [
			--index,
            dv.fileLink(p.file.path, false, shortName),
            authors,
            p.Страниц,
            p["Закончил читать"] !== null ? p["Закончил читать"] :
            ""
        ];
    })
);
```

# Все книги в базе

```dataviewjs
let booksCount = 0;
let book_pages = dv.pages("").where(page => {
    if (page["Тип"] && page["Тип"].path == "types/Книга.md" && page.file.folder != "templates") {
      booksCount++;
      return page;
    }
}).sort(p => p["Закончил читать"], "desc");

const MAX_BOOK_NAME_LENGTH = 50;
let index = booksCount + 1;

dv.table(
    ["", "Название", "Автор", "Страниц", "Прочитана"],
    book_pages.map(p => {
        const shortName = p.Название.length > MAX_BOOK_NAME_LENGTH  
            ? p.Название.substring(0, MAX_BOOK_NAME_LENGTH) + "..." 
            : p.Название;
		const authors = p.Автор.split(",").map(el => el.trim()).join("<br />");
        return [
			--index,
            dv.fileLink(p.file.path, false, shortName),
            authors,
            p.Страниц,
            p["Закончил читать"] !== null ? p["Закончил читать"] :
            ""
        ];
    })
);
```
