```sql
-- from postgres user
create extension pg_buffercache;

-- see used and unused buffers count
select * from pg_buffercache_summary();

show work_mem;
set work_mem='128MB';

EXPLAIN (analyze, buffers)
SELECT employee_id, first_name, last_name FROM wide_employee where department_id='HR' order by employment_date limit 20;
-- Buffers: shared hit=114 read=248062
-- Execution Time: 1370.851 ms
-- памяти work_mem хватает

-- sudo systemctl restart postgresql
EXPLAIN (analyze, buffers)

SELECT e.employee_id, e.first_name, e.last_name
FROM employee e
JOIN employee_hierarchy eh ON e.employee_id = eh.employee_id
WHERE department_id='HR' order by employment_date limit 20;
-- уходим в файловый кеш, ребутаем и поднимаем work_mem до 128MB
-- Buffers: shared hit=138 read=85877
-- Execution Time: 1453.068 ms



```

Разнести по разным СУБД два сценария
Сравнить размер СУБД (с учетом индексов PK)
Сказать про сценарий является и владеет (или как-то так)

[[Сценарий]]