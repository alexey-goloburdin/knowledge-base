Для чего?

- telegram web hook
- какие-то хуки систем оплаты для development среды, чтобы система интернет-эквайринга уведомляла нас о статусе тестового платежа

## Запустим локальное веб-приложение

Это может быть на веб-сервер, который крутит наше веб-приложение, или приложение для telegram-бота, или что угодно. Я запущу просто для демонстрации встроенный веб-сервер в Python, который позволяет через веб-интерфейс получить доступ к какой-то директории на компьютере:

```bash
python3.12 -m http.server
Serving HTTP on :: port 8000 (http://[::]:8000/) ...
```

Обратите внимание на IP — так показывается IPv6 `[::]`, это адрес из всех нулей, то есть `0000:0000:0000:0000:0000:0000:0000:0000`. Это означает, что сервер прослушивает все сетевые интерфейсы.

Это доступно сейчас, конечно, только с локального компьютера — если у нас локальный компьютер без белого IP, если у нас не пробрасываются порты из нашего домашнего роутера и тд. В общем случае можно настроить доступ к локально развернутому веб-ресурсу и без отдельных сервис — но мне хочется показать лайтовый вариант, который можно быстро начать использовать и для которого не надо покупать белый IP или настраивать системы динамического DNS.

Причем эти сервисы, должны работать в том числе если вы за NAT'ом, у вас сложная конфигурация сети и тд.

## ngrok

Это возможно самый популярный способ расшарить локалхост в интернет, в минимальной версии ngrok работает бесплатно, причём сейчас её возможностей в бесплатной версии больше, чем было раньше.

Установка: https://ngrok.com/download

```bash
arch -arm64 brew install ngrok/ngrok/ngrok

ngrok config add-authtoken <token>

ngrok http http://localhost:8000
# https://add1-31-172-72-21.ngrok-free.app

# CTRL+C
ngrok http http://localhost:8000
# another domain
```

Чтобы получить статичный домен https://dashboard.ngrok.com/cloud-edge/domains

```bash
ngrok http --domain=hip-lynx-explicitly.ngrok-free.app 8000
# open in Chrome https://hip-lynx-explicitly.ngrok-free.app/
```

Ура-ура!

У нас есть статичный домен, с которым мы можем запускать наш локальный сервис, и даже работает HTTPS. Здорово!

Можете таким образом раздавать файлы со своего компьютера:) Хотя возможно и скорее всего у ngrok для бесплатного использования есть ограничения по трафику и скорости.

>[!info]  Хотя
> ...это всё-таки коммерческая компания, возможно оно перестанет работать для российских IP или ещё что-то. Рассмотрим и другие варианты, опенсорсные и некоммерческие.

## localtunnel

Это бесплатное и опенсорсное решение, всё как мы любим. 

```bash
npm install -g localtunnel
lt --port 8000 --subdomain wow-my-server
# https://wow-my-server.loca.lt

# password is here https://loca.lt/mytunnelpassword
# or with curl
```

Как видим, HTTPS поддерживается, и статичный домен тоже. Крутяк!

Кто-то говорил мне, что у него `localtunnel` не работал в его сетевой конфигурации — подтвердить это я не могу, у меня всё работает как надо.

## Serveo

Ещё одно кайфовое бесплатное решение — [Serveo](https://serveo.net/). Он работает с SSH и даже ничего устанавливать не нужно гыгы:)

```bash
ssh -R 80:localhost:8000 serveo.net
# https://d573dfb540acbf3a7b5f5353e038348a.serveo.net
```

Как видите, HTTPS тоже работает. Статический домен тоже можно сделать, для этого надо зарегистрировать свой SSH публичный ключ:

```bash
ssh -R wow-my-server:80:localhost:8000 serveo.net
# переходим по ссылке в гугл или github, и снова запускаем команду

ssh -R wow-my-server:80:localhost:8000 serveo.net
# https://wow-my-server.serveo.net/
```

Отличнооо!

